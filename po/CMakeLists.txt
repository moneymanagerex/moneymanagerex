IF(NOT InMMEX)
    MESSAGE(FATAL_ERROR "Use the top-level CMake script!")
ENDIF(NOT InMMEX)

ADD_CUSTOM_TARGET(Translations ALL)
FILE(GLOB POFiles "${CMAKE_CURRENT_SOURCE_DIR}/*.po")

FOREACH(POFile ${POFiles})

    GET_FILENAME_COMPONENT(CurrentFile ${POFile} NAME_WE)
    SET(MOFile "${CMAKE_CURRENT_SOURCE_DIR}/${CurrentFile}.mo")

    ADD_CUSTOM_COMMAND(TARGET Translations
            COMMAND ${GETTEXT_MSGFMT_EXECUTABLE} -o ${MOFile} ${POFile}
            DEPENDS ${POFile})
    INSTALL(FILES ${POFile} DESTINATION ${INSTALL_PO_DIR})
    INSTALL(FILES ${MOFile} DESTINATION ${INSTALL_MO_DIR})
ENDFOREACH()
